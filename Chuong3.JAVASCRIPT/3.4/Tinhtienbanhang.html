<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ứng dụng Tính tiền bán hàng</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
    <style>
        body{
            font-family: 'Times New Roman', Times, serif;
        }
        h1{
            margin-top: 20px;
        }
        table{
            border: 1px solid black;
            margin: 10px;
        }
        th{
            border: 1px solid #0a0000;
            padding: 10px;
            text-align: center;
            background-color: gray;
        }

        td{
            border: 1px solid #0a0000;
            padding: 10px;
            text-align: left;
        }

        .check{
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>Ứng dụng Tính tiền bán hàng</h1>
    <div>
    <table>
        <tr>
            <th>STT</th>
            <th>Tên hàng hóa</th>
            <th>Số lượng có</th>
            <th>Số lượng mua</th>
            <th>Đơn giá</th>
            <th>Chọn mua</th>
        </tr>
        <tr>
            <td>1</td>
            <td>CPU</td>
            <td>
                <input type="text" id="so1" value="15" disabled>
            </td>
            <td>
                <input type="text" id="mua1" placeholder="0" disabled>
            </td>
            <td>
                <input type="text" id="gia1" value="150000" disabled>
            </td>
            <td class="check">
                <input type="checkbox" id="chon1" onclick="enableInput(1)">
            </td>
        </tr>
        <tr>
            <td>2</td>
            <td>HDD</td>
            <td>
                <input type="text" id="so2" value="15" disabled>
            </td>
            <td>
                <input type="text" id="mua2" placeholder="0" disabled>
            </td>
            <td>
                <input type="text" id="gia2" value="10000" disabled>
            </td>
            <td class="check">
                <input type="checkbox" id="chon2" onclick="enableInput(2)">
            </td>
        </tr>
        <tr>
            <td>3</td>
            <td>RAM</td>
            <td>
                <input type="text" id="so3" value="25" disabled>
            </td>
            <td>
                <input type="text" id="mua3" placeholder="0" disabled>
            </td>
            <td>
                <input type="text" id="gia3" value="29000" disabled>
            </td>
            <td class="check">
                <input type="checkbox" id="chon3" onclick="enableInput(3)">
            </td>
        </tr>
        <tr>
            <td>4</td>
            <td>ROM</td>
            <td>
                <input type="text" id="so4" value="35" disabled>
            </td>
            <td>
                <input type="text" id="mua4" placeholder="0" disabled>
            </td>
            <td>
                <input type="text" id="gia4" value="450000" disabled>
            </td>
            <td class="check">
                <input type="checkbox" id="chon4" onclick="enableInput(4)">
            </td>
        </tr>
        <tr>
            <td colspan="2"></td>
            <td>
                <button class="btn-ok" onclick="tinhTong()">OK</button>
                <button class="btn-reset" onclick="reset()">Nhập lại</button>
                <button class="btn-print" onclick="printBill()">In hóa đơn</button>
            </td>
            <td colspan="2">
                Tổng cộng: 
                <input type="text" id="tong" readonly value="0">
            </td>
            <td class="check">
                <input type="checkbox" id="vat">
                <b>VAT</b>
            </td>
        </tr>
    </table>
    </div>
    
<script>
    // Bật tắt chế độ nhập
    function enableInput(i) {
      let check = document.getElementById("chon" + i);
      let input = document.getElementById("mua" + i);
      input.disabled = !check.checked;
      if (!check.checked) input.value = "";
    }

    // Tính tổng tiền
    function tinhTong() {
        let gia = [150000, 10000, 29000, 450000];
        let tong = 0;

        for (let i = 1; i <= 4; i++) {
            let check = document.getElementById("chon" + i);
            let so = parseInt(document.getElementById("so" + i).value);
            let mua = parseInt(document.getElementById("mua" + i).value) || 0;

            if (check.checked) {
            if (mua <= so && mua > 0) {  
                tong += gia[i - 1] * mua;  
                so -= mua;                 
                document.getElementById("so" + i).value = so;
            } else if (mua > so) {
                alert("Số lượng hàng hóa hiện tại không đủ cho sản phẩm " + i);
            }
            }
        }

        if (document.getElementById("vat").checked) {
            tong *= 1.1;
        }
        document.getElementById("tong").value = tong.toLocaleString('vi-VN') + " ₫";
    }


    // Nhập lại
    function reset() {
      for (let i = 1; i <= 4; i++) {
        document.getElementById("chon" + i).checked = false;
        document.getElementById("mua" + i).value = "";
        document.getElementById("mua" + i).disabled = true;
      }
      document.getElementById("vat").checked = false;
      document.getElementById("tong").value = "0";
    }

    //In hóa đơn
    function printBill() {
        window.print();
    }
</script>
</body>
</html>